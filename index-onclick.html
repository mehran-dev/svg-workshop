<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SVG Lock Pattern with Drawing Functionality</title>
    <style>
      svg {
        width: 300px; /* Set desired width */
        height: 300px; /* Set desired height */
        background-color: #f0f0f0; /* Background color */
        cursor: pointer; /* Change cursor to pointer */
      }
      .dot {
        fill: #3498db; /* Color of the dots */
      }
      .line {
        stroke: #3498db; /* Color of the connecting lines */
        stroke-width: 4; /* Thickness of the lines */
        stroke-linecap: round; /* Round ends for smoother lines */
      }
    </style>
  </head>
  <body>
    <svg viewBox="0 0 300 300" id="lockPattern">
      <!-- Dots -->
      <circle class="dot" cx="50" cy="50" r="15" />
      <circle class="dot" cx="150" cy="50" r="15" />
      <circle class="dot" cx="250" cy="50" r="15" />
      <circle class="dot" cx="50" cy="150" r="15" />
      <circle class="dot" cx="150" cy="150" r="15" />
      <circle class="dot" cx="250" cy="150" r="15" />
      <circle class="dot" cx="50" cy="250" r="15" />
      <circle class="dot" cx="150" cy="250" r="15" />
      <circle class="dot" cx="250" cy="250" r="15" />

      <!-- Lines will be drawn here -->
    </svg>

    <script>
      const svg = document.getElementById("lockPattern");
      let startDot = null; // To store the starting dot
      let currentLine = null; // To store the currently drawn line

      // Function to handle mouse down event on dots
      function onDotClick(event) {
        const dot = event.target;

        // If the startDot is null, this is the starting point
        if (!startDot) {
          startDot = dot;
        } else {
          // If a starting dot is selected, draw line to the clicked dot
          const line = document.createElementNS(
            "http://www.w3.org/2000/svg",
            "line"
          );
          line.setAttribute("class", "line");
          line.setAttribute("x1", parseFloat(startDot.getAttribute("cx")));
          line.setAttribute("y1", parseFloat(startDot.getAttribute("cy")));
          line.setAttribute("x2", parseFloat(dot.getAttribute("cx")));
          line.setAttribute("y2", parseFloat(dot.getAttribute("cy")));
          svg.appendChild(line);

          // Reset startDot after drawing the line
          startDot = null; // Reset starting dot for next line
        }
      }

      // Function to handle mouse move event to update the current line
      function onMouseMove(event) {
        if (startDot) {
          const x = event.clientX - svg.getBoundingClientRect().left;
          const y = event.clientY - svg.getBoundingClientRect().top;

          // Update current line if it exists, otherwise create a new one
          if (!currentLine) {
            currentLine = document.createElementNS(
              "http://www.w3.org/2000/svg",
              "line"
            );
            currentLine.setAttribute("class", "line");
            currentLine.setAttribute(
              "x1",
              parseFloat(startDot.getAttribute("cx"))
            );
            currentLine.setAttribute(
              "y1",
              parseFloat(startDot.getAttribute("cy"))
            );
            svg.appendChild(currentLine);
          }

          currentLine.setAttribute("x2", x);
          currentLine.setAttribute("y2", y);
        }
      }

      // Function to handle mouse up event
      function onMouseUp() {
        if (currentLine) {
          // Reset the current line after mouse up
          currentLine = null;
        }
        startDot = null; // Reset starting dot
      }

      // Add event listeners to the SVG dots and the main SVG
      const dots = document.querySelectorAll(".dot");
      dots.forEach((dot) => dot.addEventListener("click", onDotClick));
      svg.addEventListener("mousemove", onMouseMove);
      svg.addEventListener("mouseup", onMouseUp);
      svg.addEventListener("mouseleave", onMouseUp); // Reset on mouse leave
    </script>
  </body>
</html>
